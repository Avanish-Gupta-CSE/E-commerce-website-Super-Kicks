---
description: Testing guidelines for Super Kicks
globs: "**/*.test.ts,**/*.test.tsx,**/*.spec.ts"
alwaysApply: false
---

# Testing Guidelines

## Framework
- **Unit/Integration**: Vitest + React Testing Library
- **E2E**: Playwright
- **Coverage target**: 80% minimum

## File Naming
- Unit tests: `ComponentName.test.tsx` or `utilName.test.ts`
- E2E tests: `feature-name.spec.ts` in `e2e/` directory
- Colocate unit tests with source files

## Principles
- Test user behavior, not implementation details
- Query by role, label, or text -- avoid test IDs unless necessary
- Each test should be independent and not rely on test execution order
- Use `describe` blocks to group related tests

## Patterns

```tsx
// Component test
import { render, screen } from '@testing-library/react';
import userEvent from '@testing-library/user-event';
import { ProductCard } from './ProductCard';

describe('ProductCard', () => {
  const mockProduct = {
    _id: '1',
    productName: 'Test Shoe',
    price: 100,
    discountedPrice: 80,
    rating: 4.5,
  };

  it('renders product name and price', () => {
    render(<ProductCard product={mockProduct} />);
    expect(screen.getByText('Test Shoe')).toBeInTheDocument();
    expect(screen.getByText('$80')).toBeInTheDocument();
  });

  it('calls addToCart when button is clicked', async () => {
    const user = userEvent.setup();
    render(<ProductCard product={mockProduct} />);
    await user.click(screen.getByRole('button', { name: /add to cart/i }));
    // assert cart state changed
  });
});
```

## What to Test
- **Always**: utility functions, custom hooks, form validation, auth flows
- **Usually**: component rendering, user interactions, error states
- **E2E**: login flow, add-to-cart -> checkout, search and filter

## What Not to Test
- Third-party library internals
- Static markup with no logic
- Implementation details (internal state, private methods)
